model:
  name: gaussian
  inputs:
    input: [1, 3, 256, 256]
  checkpoint: checkpoint/gaussian.onnx

engine:
  type: vacc
  dtype: int8
  common:
    data_transport_mode: 1
  add_extra_ops_to_graph:
    type: null
  calibration:
    calibrate_mode: percentile
    quantize_per_channel: true

dataset:
  path: results/gaussian_n/sigma-25/lr_src_noise
  sampler:
    suffix: null
    get_data_num: 50
  transform_ops:
    - type: DecodeImage
    - type: Resize
      size: [256, 256]
    - type: Normalize
      mean: [0.5, 0.5, 0.5]
      std: [1.0, 1.0, 1.0]
    - type: ToTensor

workspace:
  work_dir: ./deploy_weights/
  enable_ir: true
  save_log: true

# cd /home/simplew/code/vamc/vamp/2.1.0

# ./vamp_2.1.0 -m /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/deploy_weights/gaussian-fp16-none-1_3_256_256-vacc/mod --vdsp_params /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/deblurring_denoising/idr/vacc_code/vdsp_params/official-idr_unet-vdsp_params.json -i 1 p 1 -b 1 --datalist /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/idr_npz_datalist.txt --path_output ./outputs
# model input shape 0: [3,256,256], dtype: u1
# load model and init graph done
# - number of instances in each device: 1
#   devices: [0]
#   batch size: 1
#   ai utilize (%): 95.0556
#   temperature (°C): 48.7072
#   card power (W): 63.3866
#   die memory used (MB): 1196.73
#   throughput (qps): 492.556
#   e2e latency (us):
#     avg latency: 4966
#     min latency: 2580
#     max latency: 6433
#     p50 latency: 4484
#     p90 latency: 5982
#     p95 latency: 6005
#     p99 latency: 6041
#   model latency (us):
#     avg latency: 4924
#     min latency: 2528
#     max latency: 6361
#     p50 latency: 4411
#     p90 latency: 5940
#     p95 latency: 5960
#     p99 latency: 5988


# ./vamp_2.1.0 -m /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/deploy_weights/gaussian-int8-percentile-1_3_256_256-vacc/mod --vdsp_params /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/deblurring_denoising/idr/vacc_code/vdsp_params/official-idr_unet-vdsp_params.json -i 1 p 1 -b 1 --datalist /home/simplew/code/vastmodelzoo/0914/algorithm_modelzoo/idr_npz_datalist.txt --path_output ./outputs
# load model and init graph done
# - number of instances in each device: 1
#   devices: [0]
#   batch size: 1
#   ai utilize (%): 94
#   temperature (°C): 44.125
#   card power (W): 60.2988
#   die memory used (MB): 1164.85
#   throughput (qps): 2078.2
#   e2e latency (us):
#     avg latency: 1134
#     min latency: 838
#     max latency: 1835
#     p50 latency: 1251
#     p90 latency: 1360
#     p95 latency: 1378
#     p99 latency: 1423
#   model latency (us):
#     avg latency: 1118
#     min latency: 831
#     max latency: 1823
#     p50 latency: 1239
#     p90 latency: 1338
#     p95 latency: 1361
#     p99 latency: 1399
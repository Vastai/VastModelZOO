model:
  name: dncnn
  inputs:
    input: [1, 1, 256, 256]
  checkpoint: dncnn.onnx

engine:
  type: vacc
  dtype: fp16
  common:
    data_transport_mode: 1
  add_extra_ops_to_graph:
    type: null
  calibration:
    calibrate_mode: percentile
    quantize_per_channel: true

dataset:
  path: /home/simplew/code/model_check/SR/deblur_denoise/DnCNN/TrainingCodes/DnCNN_TrainingCodes_DagNN_v1.1/testsets/Set12
  sampler:
    suffix: null
    get_data_num: 100
  transform_ops:
    - type: DecodeImage
      cv2_flags: 0
    - type: Resize
      size: [256, 256]
    - type: Normalize
      norm_type: null
    - type: ToTensor

workspace:
  work_dir: ./deploy_weights/
  enable_ir: true
  save_log: true


# cd /home/simplew/code/vamc/vamp/2.1.0

# ./vamp_2.1.0 -m /home/simplew/code/vastmodelzoo/0828/algorithm_modelzoo/deploy_weights/dncnn-int8-percentile-1_1_256_256-vacc/mod --vdsp_params /home/simplew/code/vastmodelzoo/0828/algorithm_modelzoo/deblurring_denoising/dncnn/vacc_code/vdsp_params/official-dncnn-vdsp_params.json -i 1 p 1 -b 1 
# #  --datalist /home/simplew/dataset/denoise/Set12/datalist_npz.txt --path_output ./outputs

# model input shape 0: [3,256,256], dtype: u1
# load model and init graph done
# - number of instances in each device: 1
#   devices: [0]
#   batch size: 1
#   ai utilize (%): 94.4167
#   temperature (°C): 48.5142
#   card power (W): 54.7673
#   die memory used (MB): 1164.75
#   throughput (qps): 685.706
#   e2e latency (us):
#     avg latency: 3551
#     min latency: 1444
#     max latency: 5715
#     p50 latency: 3559
#     p90 latency: 5309
#     p95 latency: 5347
#     p99 latency: 5397
#   model latency (us):
#     avg latency: 3517
#     min latency: 1389
#     max latency: 5660
#     p50 latency: 3514
#     p90 latency: 5272
#     p95 latency: 5302
#     p99 latency: 5349

# ./vamp_2.1.0 -m /home/simplew/code/vastmodelzoo/0828/algorithm_modelzoo/deploy_weights/dncnn-fp16-none-1_1_256_256-vacc/mod --vdsp_params /home/simplew/code/vastmodelzoo/0828/algorithm_modelzoo/deblurring_denoising/dncnn/vacc_code/vdsp_params/official-dncnn-vdsp_params.json -i 1 p 1 -b 1 
# model input shape 0: [3,256,256], dtype: u1
# load model and init graph done
# - number of instances in each device: 1
#   devices: [0]
#   batch size: 1
#   ai utilize (%): 95.1017
#   temperature (°C): 53.0476
#   card power (W): 53.8038
#   die memory used (MB): 1164.62
#   throughput (qps): 152.71
#   e2e latency (us):
#     avg latency: 16251
#     min latency: 4354
#     max latency: 23884
#     p50 latency: 15214
#     p90 latency: 22786
#     p95 latency: 22813
#     p99 latency: 22859
#   model latency (us):
#     avg latency: 16210
#     min latency: 4303
#     max latency: 23799
#     p50 latency: 15171
#     p90 latency: 22736
#     p95 latency: 22766
#     p99 latency: 22805